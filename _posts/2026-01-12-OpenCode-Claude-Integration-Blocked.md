---
layout: post
title: OpenCode에서 Claude Code 연동 차단 - Harness OAuth 우회 종료
author: 'Juho'
date: 2026-01-12 14:00:00 +0900
categories: [OpenCode]
tags: [Claude Code, AI, Coding, CLI, LLM]
pin: True
toc: True
---

<style>
  th{
    font-weight: bold;
    text-align: center;
    background-color: white;
  }
  td{
    background-color: white;
  }

</style>

## 목차
1. [개요](#개요)
2. [발생한 에러 메시지](#발생한-에러-메시지)
3. [차단의 배경과 원인](#차단의-배경과-원인)
4. [Harness의 작동 원리](#harness의-작동-원리)
5. [경제성 문제](#경제성-문제)
6. [사용자 선택지와 해결 방법](#사용자-선택지와-해결-방법)
7. [Anthropic의 향후 계획](#anthropic의-향후-계획)
8. [결론](#결론)

## 개요

2026년 1월 9일, Anthropic은 서드파티 CLI 도구들이 "Harness"라는 OAuth 우회 도구를 통해 Claude Pro/Max 구독을 사용하는 것을 차단했다.  
이로 인해 많은 OpenCode 사용자들이 갑작스럽게 Claude Code 통합 기능을 사용할 수 없게 되었다.  
이 글에서는 차단 사태의 배경, 원인, 그리고 사용자들이 취할 수 있는 해결 방법에 대해 정리한다.  

## 발생한 에러 메시지

OpenCode와 다른 서드파티 CLI 도구를 사용하던 사용자들은 다음과 같은 오류 메시지를 받게 되었다.  

```
This credential is only authorized for use with Claude Code
```

이 메시지는 Claude Pro/Max 구독으로 인증된 OAuth 토큰이 공식 Claude Code CLI 외의 도구에서는 더 이상 사용될 수 없다는 것을 의미한다.  

## 차단의 배경과 원인

### Harness란 무엇인가?

Harness는 서드파티 CLI 도구들이 Claude의 공식 구독 시스템을 우회하여 사용할 수 있도록 만든 OAuth 프록시 도구였다.  
OpenCode를 비롯한 여러 CLI 도구들이 이 시스템에 의존하여 사용자들의 Claude Pro/Max 구독을 활용할 수 있었다.  

### 차단 이유

Anthropic이 이러한 우회를 차단한 주요 이유는 다음과 같다.  

1. **비공식 API 사용**: Harness는 공식적으로 지원되지 않는 방식으로 Claude의 인증 시스템을 우회했다.  
2. **경제적 불균형**: 월 정액제를 통한 무제한 사용이 API 종량제 가격 체계와 충돌했다.  
3. **서비스 안정성**: 예상치 못한 부하와 남용 가능성에 대한 우려가 있었다.  

## Harness의 작동 원리

Harness는 다음과 같은 방식으로 작동했다.  

```
[사용자 브라우저] → [OAuth 토큰 추출]
         ↓
[Harness 프록시 서버 실행]
         ↓
[서드파티 CLI 요청] → [공식 Claude Code로 위장]
         ↓
[Claude API 서버]
```

**핵심 메커니즘:**
1. 사용자의 Claude 구독 OAuth 토큰을 추출한다.  
2. 로컬에 프록시 서버를 구동한다.  
3. 서드파티 CLI의 요청을 가로챈다.   
4. 요청을 마치 공식 Claude Code에서 오는 것처럼 변조한다.  
5. Claude API 서버에 전송한다.  

이 방식은 기술적으로는 작동했지만 Claude의 서비스 약관을 위반하는 것이었다.  

## 경제성 문제

Harness 우회가 차단된 가장 큰 이유 중 하나는 경제성 문제였다.  

### 가격 비교

| 방식 | 비용 | 토큰 제한 |
|------|------|-----------|
| Claude Pro 구독 | $200/월 | 무제한 (공정 사용 기준) |
| Anthropic API (종량제) | 사용량 기반 | 없음 |

**구체적인 예시:**
- Claude Pro 구독: 월 $200로 무제한 토큰 사용 가능 (합리적 범위 내)  
- API 종량제: 같은 작업량에 월 $1,000 이상 소비될 수 있음  

이러한 가격 차이로 인해 많은 개발자들이 Harness를 통해 Pro 구독으로 API를 사용하려 했고  
이는 Anthropic의 수익 구조에 부정적인 영향을 미쳤다.  

## 사용자 선택지와 해결 방법

Harness 차단 이후 사용자들에게는 다음과 같은 선택지가 남았다.  

### 1. 공식 Claude Code CLI로 전환

**장점:**
- 공식 지원과 안정성 보장  
- Anthropic의 최신 기능 즉시 사용 가능  
- 서비스 약관 준수  

**단점:**
- 기능이 OpenCode 등 서드파티 도구에 비해 제한적일 수 있음  
- 특정 IDE 통합 기능 부족  

### 2. Anthropic API 키 구매 (종량제)

**장점:**  
- 유연한 사용량 조절  
- 모든 서드파티 도구와 호환  
- 프로그래매틱한 제어 가능  

**단점:**  
- 사용량에 따라 비용이 크게 증가할 수 있음  
- 비용 예측이 어려움  

### 3. 다른 LLM 모델로 전환  

**대안 옵션:**  
- OpenAI GPT-4/o1  
- Google Gemini  
- Anthropic Claude (API를 통한 직접 사용)  

**고려사항:**  
- 각 모델의 성능과 가격 비교 필요  
- 기존 워크플로우 변경 필요  

### 4. 오인 차단의 경우  

일부 사용자는 Harness를 사용하지 않았음에도 차단당한 경우가 있었다.  

**해결 방법:**  
- Anthropic의 Thariq Shihipar에게 DM 연락  
- 계정 복구 요청  
- 사용 내역 증빙 제출  

## Anthropic의 향후 계획  

Anthropic은 이번 차단과 함께 다음과 같은 개선 사항을 약속했다.  

### OAuth 화면 개선  
**계획된 변경사항:**  
1. OAuth 인증 화면에서 사용 제한 사항을 명확히 표시  
2. 공식 Claude Code 전용임을 사용자에게 명시  
3. API 사용을 원하는 경우 별도 안내  

### 투명성 강화  

Anthropic은 향후 이러한 정책 변경 사항을 사전에 더 명확히 공지하겠다고 밝혔다.  
다만, 보안과 남용 방지를 위해 모든 변경 사항을 사전 공지할 수는 없다는 점도 함께 언급했다.  

## 결론

Harness를 통한 OAuth 우회 차단은 AI 서비스의 상업화 과정에서 불가피한 조치였다고 볼 수 있다.  
무제한 구독 모델과 종량제 API를 동시에 운영하는 상황에서  
두 시스템 간의 경계가 모호해지면 사업 모델 자체가 위협받을 수 있기 때문이다.  

### 개발자가 취해야 할 행동

1. **공식 도구 우선 고려**: 가능하면 공식 Claude Code CLI를 사용한다.  
2. **비용 계산**: API 사용량을 예측하여 Pro 구독과 API 종량제 중 선택한다.  
3. **대안 준비**: 단일 LLM에 의존하지 않고 여러 모델을 병행 사용할 수 있도록 준비한다.  
4. **정책 모니터링**: Anthropic의 공식 채널을 통해 정책 변경을 지속적으로 확인한다.  

### 향후 전망

이번 차단은 AI 업계 전반에 걸쳐 유사한 조치들이 취해질 가능성을 시사한다.  
OpenAI, Google 등 다른 AI 제공업체들도 구독과 API 사용을 더욱 명확히 구분할 것으로 예상된다.  
개발자들은 공식적으로 지원되는 방법을 사용하는 것이 장기적으로 가장 안전하고 지속 가능한 선택임을 인식해야 한다.  
